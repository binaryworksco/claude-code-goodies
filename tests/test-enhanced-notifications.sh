#!/bin/bash
# Test script for enhanced approval notifications

echo "===================="
echo "Testing Enhanced Approval Notifications"
echo "===================="
echo ""
echo "The approval-notification.sh hook now extracts tool names from notification messages"
echo "and displays them clearly in Telegram notifications."
echo ""
echo "Example notification formats:"
echo ""
echo "1. When Claude needs Write tool approval:"
echo "   Message: 'Claude needs your permission to use Write'"
echo "   Telegram shows:"
echo "   ⏳ Claude Code Action Required"
echo "   Claude needs approval to use the Write tool to create or overwrite files"
echo ""
echo "2. When Claude needs Bash tool approval:"
echo "   Message: 'Claude needs your permission to use Bash'"
echo "   Telegram shows:"
echo "   ⏳ Claude Code Action Required"
echo "   Claude needs approval to use the Bash tool to execute shell commands"
echo ""
echo "3. When Claude needs Edit tool approval:"
echo "   Message: 'Claude needs your permission to use Edit'"
echo "   Telegram shows:"
echo "   ⏳ Claude Code Action Required"
echo "   Claude needs approval to use the Edit tool to modify existing files"
echo ""
echo "Tool descriptions included:"
echo "- Write: create or overwrite files"
echo "- Edit/MultiEdit: modify existing files"
echo "- Update: update files"
echo "- Bash: execute shell commands"
echo "- Read: read file contents"
echo "- TodoWrite: manage task lists"
echo "- WebFetch: fetch web content"
echo "- WebSearch: search the web"
echo "- Others: perform an operation"
echo ""
echo "===================="
echo "To test:"
echo "1. Try using a tool that's not in allowed-tasks.txt"
echo "2. Check the Telegram notification - it should show the specific tool name"
echo "3. Check ~/.claude/logs/approval-notifications.log for details"
echo "===================="